# ç§¯åˆ†ç³»ç»Ÿå®Œæ•´æ–‡æ¡£

## ç›®å½•

1. [ç³»ç»Ÿæ¦‚è¿°](#ç³»ç»Ÿæ¦‚è¿°)
2. [åŠŸèƒ½ç‰¹æ€§](#åŠŸèƒ½ç‰¹æ€§)
3. [æ•°æ®åº“è®¾è®¡](#æ•°æ®åº“è®¾è®¡)
4. [åç«¯API](#åç«¯API)
5. [å‰ç«¯ç»„ä»¶](#å‰ç«¯ç»„ä»¶)
6. [ç®¡ç†å‘˜åŠŸèƒ½](#ç®¡ç†å‘˜åŠŸèƒ½)
7. [ç³»ç»Ÿé›†æˆ](#ç³»ç»Ÿé›†æˆ)
8. [éƒ¨ç½²é…ç½®](#éƒ¨ç½²é…ç½®)
9. [ä½¿ç”¨æŒ‡å—](#ä½¿ç”¨æŒ‡å—)
10. [æ•…éšœæ’é™¤](#æ•…éšœæ’é™¤)

---

## ç³»ç»Ÿæ¦‚è¿°

### ç®€ä»‹

ç§¯åˆ†ç³»ç»Ÿæ˜¯ä¸€ä¸ªå®Œæ•´çš„ç”¨æˆ·æ¿€åŠ±å’Œå¥–åŠ±ç³»ç»Ÿï¼Œæ”¯æŒå¤šç§ç§¯åˆ†ç±»å‹ã€è‡ªåŠ¨è§¦å‘æœºåˆ¶ã€äº¤æ˜“å¸‚åœºå’Œç®¡ç†åŠŸèƒ½ã€‚ç”¨æˆ·é€šè¿‡å‚ä¸ç½‘ç«™æ´»åŠ¨è·å¾—ç§¯åˆ†ï¼Œå¯ä»¥ä½¿ç”¨ç§¯åˆ†è´­ä¹°å•†å“å’ŒæœåŠ¡ã€‚

### æ ¸å¿ƒç‰¹æ€§

- **4ç§ç§¯åˆ†ç±»å‹**ï¼šé€šç”¨ç§¯åˆ†ã€æ¸¸æˆç§¯åˆ†ã€äº¤æ˜“ç§¯åˆ†ã€æ´»åŠ¨ç§¯åˆ†
- **è‡ªåŠ¨è§¦å‘**ï¼šç™»å½•ã€å‘å¸–ã€å›å¤ã€èŠå¤©ã€æ·»åŠ å¥½å‹ç­‰è¡Œä¸ºè‡ªåŠ¨è·å¾—ç§¯åˆ†
- **äº¤æ˜“å¸‚åœº**ï¼šç”¨æˆ·å¯ä»¥ä½¿ç”¨ç§¯åˆ†è´­ä¹°å„ç§å•†å“
- **ç®¡ç†åŠŸèƒ½**ï¼šç®¡ç†å‘˜å¯ä»¥ç®¡ç†ç§¯åˆ†è§„åˆ™ã€å•†å“å’Œç”¨æˆ·ç§¯åˆ†
- **å®æ—¶é€šçŸ¥**ï¼šç§¯åˆ†è·å¾—æ—¶æ˜¾ç¤ºå®æ—¶é€šçŸ¥
- **ç»Ÿè®¡åˆ†æ**ï¼šå®Œæ•´çš„ç§¯åˆ†ç»Ÿè®¡å’Œåˆ†æåŠŸèƒ½

---

## åŠŸèƒ½ç‰¹æ€§

### ç§¯åˆ†ç±»å‹

#### 1. é€šç”¨ç§¯åˆ†

- **ç”¨é€”**ï¼šè´­ä¹°å„ç§å•†å“å’ŒæœåŠ¡
- **è·å–æ–¹å¼**ï¼šç½‘ç«™ç™»å½•ã€å‘å¸ƒå¸–å­ã€å›å¤ã€èŠå¤©ç­‰
- **é™åˆ¶**ï¼šæœ‰æ¯æ—¥è·å–ä¸Šé™ï¼Œæœ‰ç§¯åˆ†è¿‡æœŸæœºåˆ¶
- **ä»·å€¼**ï¼šæœ‰å®é™…ä»·å€¼

#### 2. æ¸¸æˆç§¯åˆ†

- **ç”¨é€”**ï¼šè´­ä¹°æ¸¸æˆå†…èµåŠ©é“å…·
- **è·å–æ–¹å¼**ï¼šåªèƒ½ç®¡ç†å‘˜é€šè¿‡ç®¡ç†æ§åˆ¶å°æ·»åŠ 
- **é™åˆ¶**ï¼šæ— æ¯æ—¥è·å–ä¸Šé™ï¼Œæ— ç§¯åˆ†è¿‡æœŸæœºåˆ¶
- **ä»·å€¼**ï¼šæœ‰å®é™…ä»·å€¼

#### 3. äº¤æ˜“ç§¯åˆ†

- **ç”¨é€”**ï¼šä¸“é—¨ç”¨äºäº¤æ˜“å¸‚åœº
- **è·å–æ–¹å¼**ï¼šåªèƒ½ç®¡ç†å‘˜é€šè¿‡ç®¡ç†æ§åˆ¶å°æ·»åŠ 
- **é™åˆ¶**ï¼šæ— æ¯æ—¥è·å–ä¸Šé™ï¼Œæ— ç§¯åˆ†è¿‡æœŸæœºåˆ¶
- **ä»·å€¼**ï¼šæœ‰å®é™…ä»·å€¼

#### 4. æ´»åŠ¨ç§¯åˆ†

- **ç”¨é€”**ï¼šé€šè¿‡å‚ä¸æ´»åŠ¨è·å¾—
- **è·å–æ–¹å¼**ï¼šé€šè¿‡å‚ä¸æ¸¸æˆå†…æ´»åŠ¨
- **é™åˆ¶**ï¼šæœ‰æ¯æ—¥è·å–ä¸Šé™ï¼Œæœ‰ç§¯åˆ†è¿‡æœŸæœºåˆ¶
- **ä»·å€¼**ï¼šæœ‰å®é™…ä»·å€¼

### ç§¯åˆ†è·å–æ–¹å¼

#### è‡ªåŠ¨è§¦å‘

- **ç™»å½•å¥–åŠ±**ï¼šæ¯æ—¥é¦–æ¬¡ç™»å½•è·å¾—10åˆ†é€šç”¨ç§¯åˆ†
- **å‘å¸–å¥–åŠ±**ï¼šå‘å¸ƒå¸–å­è·å¾—20åˆ†é€šç”¨ç§¯åˆ†ï¼ˆæ¯æ—¥5æ¬¡ï¼Œå†·å´30åˆ†é’Ÿï¼‰
- **å›å¤å¥–åŠ±**ï¼šå›å¤å¸–å­è·å¾—5åˆ†é€šç”¨ç§¯åˆ†ï¼ˆæ¯æ—¥10æ¬¡ï¼Œå†·å´10åˆ†é’Ÿï¼‰
- **èŠå¤©å¥–åŠ±**ï¼šå‘é€æ¶ˆæ¯è·å¾—2åˆ†é€šç”¨ç§¯åˆ†ï¼ˆæ¯æ—¥20æ¬¡ï¼Œå†·å´5åˆ†é’Ÿï¼‰
- **å¥½å‹å¥–åŠ±**ï¼šæ·»åŠ å¥½å‹è·å¾—15åˆ†é€šç”¨ç§¯åˆ†ï¼ˆæ¯æ—¥3æ¬¡ï¼‰

#### ç®¡ç†å‘˜æ“ä½œ

- **å¢åŠ ç§¯åˆ†**ï¼šç®¡ç†å‘˜å¯ä»¥ä¸ºç”¨æˆ·å¢åŠ ä»»æ„ç±»å‹ç§¯åˆ†
- **æ‰£é™¤ç§¯åˆ†**ï¼šç®¡ç†å‘˜å¯ä»¥æ‰£é™¤ç”¨æˆ·ç§¯åˆ†
- **é‡ç½®ç§¯åˆ†**ï¼šç®¡ç†å‘˜å¯ä»¥é‡ç½®ç”¨æˆ·ç§¯åˆ†

### ç§¯åˆ†è§„åˆ™

#### é€šç”¨ç§¯åˆ†è§„åˆ™

- æœ‰æ¯æ—¥è·å–ä¸Šé™
- æœ‰ç§¯åˆ†è¿‡æœŸæœºåˆ¶
- é€šè¿‡ç½‘ç«™è¡Œä¸ºè·å¾—
- ä¸èƒ½ç”¨äºäº¤æ˜“å¸‚åœº/æ¸¸æˆèµåŠ©

#### æ¸¸æˆç§¯åˆ†è§„åˆ™

- æ— æ¯æ—¥è·å–ä¸Šé™
- æ— ç§¯åˆ†è¿‡æœŸæœºåˆ¶
- åªèƒ½ç®¡ç†å‘˜æ·»åŠ 
- ç”¨äºè´­ä¹°æ¸¸æˆå†…èµåŠ©é“å…·

#### äº¤æ˜“ç§¯åˆ†è§„åˆ™

- æ— æ¯æ—¥è·å–ä¸Šé™
- æ— ç§¯åˆ†è¿‡æœŸæœºåˆ¶
- åªèƒ½ç®¡ç†å‘˜æ·»åŠ 
- ä¸å…è®¸ç©å®¶é—´äº¤æ˜“

#### æ´»åŠ¨ç§¯åˆ†è§„åˆ™

- æœ‰æ¯æ—¥è·å–ä¸Šé™
- æœ‰ç§¯åˆ†è¿‡æœŸæœºåˆ¶
- é€šè¿‡å‚ä¸æ´»åŠ¨è·å¾—
- ä¸èƒ½é€šè¿‡ç½‘ç«™è¡Œä¸ºè·å¾—

---

## æ•°æ®åº“è®¾è®¡

### ç§¯åˆ†ç±»å‹è¡¨ (points_types)

```sql
CREATE TABLE points_types (
  id INT PRIMARY KEY AUTO_INCREMENT,
  name VARCHAR(50) NOT NULL COMMENT 'ç§¯åˆ†ç±»å‹åç§°',
  slug VARCHAR(50) NOT NULL UNIQUE COMMENT 'ç§¯åˆ†ç±»å‹æ ‡è¯†',
  display_name VARCHAR(100) NOT NULL COMMENT 'æ˜¾ç¤ºåç§°',
  description TEXT COMMENT 'æè¿°',
  icon VARCHAR(10) COMMENT 'å›¾æ ‡',
  color VARCHAR(20) COMMENT 'é¢œè‰²',
  sort_order INT DEFAULT 0 COMMENT 'æ’åº',
  is_active TINYINT(1) DEFAULT 1 COMMENT 'æ˜¯å¦å¯ç”¨',
  created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
  updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP
);
```

### ç§¯åˆ†è§„åˆ™è¡¨ (points_rules)

```sql
CREATE TABLE points_rules (
  id INT PRIMARY KEY AUTO_INCREMENT,
  name VARCHAR(100) NOT NULL COMMENT 'è§„åˆ™åç§°',
  slug VARCHAR(100) NOT NULL UNIQUE COMMENT 'è§„åˆ™æ ‡è¯†',
  points_type_id INT NOT NULL COMMENT 'ç§¯åˆ†ç±»å‹ID',
  trigger_type VARCHAR(50) NOT NULL COMMENT 'è§¦å‘ç±»å‹',
  trigger_conditions JSON COMMENT 'è§¦å‘æ¡ä»¶',
  points_amount INT NOT NULL COMMENT 'ç§¯åˆ†æ•°é‡',
  points_formula TEXT COMMENT 'ç§¯åˆ†å…¬å¼',
  max_daily INT COMMENT 'æ¯æ—¥ä¸Šé™',
  max_total INT COMMENT 'æ€»ä¸Šé™',
  cooldown_minutes INT COMMENT 'å†·å´æ—¶é—´ï¼ˆåˆ†é’Ÿï¼‰',
  is_active TINYINT(1) DEFAULT 1 COMMENT 'æ˜¯å¦å¯ç”¨',
  start_date TIMESTAMP NULL COMMENT 'å¼€å§‹æ—¶é—´',
  end_date TIMESTAMP NULL COMMENT 'ç»“æŸæ—¶é—´',
  description TEXT COMMENT 'æè¿°',
  created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
  updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  FOREIGN KEY (points_type_id) REFERENCES points_types(id)
);
```

### ç”¨æˆ·ç§¯åˆ†è¡¨ (user_points)

```sql
CREATE TABLE user_points (
  id INT PRIMARY KEY AUTO_INCREMENT,
  user_id VARCHAR(50) NOT NULL COMMENT 'ç”¨æˆ·ID',
  points_type_id INT NOT NULL COMMENT 'ç§¯åˆ†ç±»å‹ID',
  balance INT DEFAULT 0 COMMENT 'å½“å‰ä½™é¢',
  total_earned INT DEFAULT 0 COMMENT 'æ€»è·å¾—',
  total_spent INT DEFAULT 0 COMMENT 'æ€»æ¶ˆè´¹',
  created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
  updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  FOREIGN KEY (user_id) REFERENCES users(id),
  FOREIGN KEY (points_type_id) REFERENCES points_types(id),
  UNIQUE KEY unique_user_points (user_id, points_type_id)
);
```

### ç§¯åˆ†äº¤æ˜“è¡¨ (points_transactions)

```sql
CREATE TABLE points_transactions (
  id INT PRIMARY KEY AUTO_INCREMENT,
  user_id VARCHAR(50) NOT NULL COMMENT 'ç”¨æˆ·ID',
  points_type_id INT NOT NULL COMMENT 'ç§¯åˆ†ç±»å‹ID',
  transaction_type ENUM('earn', 'spend', 'admin_add', 'admin_deduct', 'admin_reset', 'expire') NOT NULL COMMENT 'äº¤æ˜“ç±»å‹',
  amount INT NOT NULL COMMENT 'äº¤æ˜“é‡‘é¢',
  balance_before INT NOT NULL COMMENT 'äº¤æ˜“å‰ä½™é¢',
  balance_after INT NOT NULL COMMENT 'äº¤æ˜“åä½™é¢',
  source VARCHAR(100) COMMENT 'æ¥æº',
  description TEXT COMMENT 'æè¿°',
  related_user_id VARCHAR(50) COMMENT 'ç›¸å…³ç”¨æˆ·ID',
  related_data JSON COMMENT 'ç›¸å…³æ•°æ®',
  expires_at TIMESTAMP NULL COMMENT 'è¿‡æœŸæ—¶é—´',
  created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
  FOREIGN KEY (user_id) REFERENCES users(id),
  FOREIGN KEY (points_type_id) REFERENCES points_types(id),
  FOREIGN KEY (related_user_id) REFERENCES users(id)
);
```

### ç§¯åˆ†å•†å“è¡¨ (points_products)

```sql
CREATE TABLE points_products (
  id INT PRIMARY KEY AUTO_INCREMENT,
  name VARCHAR(100) NOT NULL COMMENT 'å•†å“åç§°',
  description TEXT COMMENT 'å•†å“æè¿°',
  points_type_id INT NOT NULL COMMENT 'ç§¯åˆ†ç±»å‹ID',
  points_cost INT NOT NULL COMMENT 'ç§¯åˆ†ä»·æ ¼',
  product_type VARCHAR(50) NOT NULL COMMENT 'å•†å“ç±»å‹',
  product_data JSON COMMENT 'å•†å“æ•°æ®',
  is_active TINYINT(1) DEFAULT 1 COMMENT 'æ˜¯å¦å¯ç”¨',
  sort_order INT DEFAULT 0 COMMENT 'æ’åº',
  created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
  updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  FOREIGN KEY (points_type_id) REFERENCES points_types(id)
);
```

### ç§¯åˆ†è®¢å•è¡¨ (points_orders)

```sql
CREATE TABLE points_orders (
  id INT PRIMARY KEY AUTO_INCREMENT,
  user_id VARCHAR(50) NOT NULL COMMENT 'ç”¨æˆ·ID',
  product_id INT NOT NULL COMMENT 'å•†å“ID',
  points_cost INT NOT NULL COMMENT 'ç§¯åˆ†ä»·æ ¼',
  status ENUM('pending', 'completed', 'cancelled', 'refunded') DEFAULT 'pending' COMMENT 'è®¢å•çŠ¶æ€',
  order_data JSON COMMENT 'è®¢å•æ•°æ®',
  created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
  updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  FOREIGN KEY (user_id) REFERENCES users(id),
  FOREIGN KEY (product_id) REFERENCES points_products(id)
);
```

### ç”¨æˆ·ç§¯åˆ†ä½¿ç”¨è¡¨ (user_points_usage)

```sql
CREATE TABLE user_points_usage (
  id INT PRIMARY KEY AUTO_INCREMENT,
  user_id VARCHAR(50) NOT NULL COMMENT 'ç”¨æˆ·ID',
  product_id INT NOT NULL COMMENT 'å•†å“ID',
  order_id INT NOT NULL COMMENT 'è®¢å•ID',
  usage_data JSON COMMENT 'ä½¿ç”¨æ•°æ®',
  created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
  FOREIGN KEY (user_id) REFERENCES users(id),
  FOREIGN KEY (product_id) REFERENCES points_products(id),
  FOREIGN KEY (order_id) REFERENCES points_orders(id)
);
```

---

## åç«¯API

### ç”¨æˆ·ç§¯åˆ†API

#### è·å–ç§¯åˆ†ä½™é¢

```http
GET /api/points/balance
Authorization: Bearer <token>
```

**å“åº”**ï¼š

```json
{
  "success": true,
  "data": {
    "points": [
      {
        "points_type_slug": "general",
        "points_type_display": "é€šç”¨ç§¯åˆ†",
        "points_type_icon": "ğŸ’°",
        "points_type_color": "#3b82f6",
        "balance": 150,
        "total_earned": 200,
        "total_spent": 50
      }
    ]
  }
}
```

#### è·å–äº¤æ˜“è®°å½•

```http
GET /api/points/transactions?page=1&limit=20&pointsType=general
Authorization: Bearer <token>
```

**å“åº”**ï¼š

```json
{
  "success": true,
  "data": {
    "transactions": [
      {
        "id": 1,
        "transaction_type": "earn",
        "amount": 10,
        "balance_before": 140,
        "balance_after": 150,
        "source": "daily_login",
        "description": "æ¯æ—¥ç™»å½•å¥–åŠ±",
        "created_at": "2025-01-12T10:00:00.000Z"
      }
    ],
    "pagination": {
      "page": 1,
      "limit": 20,
      "total": 50,
      "pages": 3
    }
  }
}
```

#### è§¦å‘ç§¯åˆ†è·å–

```http
POST /api/points/earn
Authorization: Bearer <token>
Content-Type: application/json

{
  "pointsType": "general",
  "source": "daily_login",
  "description": "æ¯æ—¥ç™»å½•å¥–åŠ±"
}
```

#### æ¶ˆè´¹ç§¯åˆ†

```http
POST /api/points/spend
Authorization: Bearer <token>
Content-Type: application/json

{
  "pointsType": "general",
  "amount": 100,
  "source": "purchase",
  "description": "è´­ä¹°å•†å“"
}
```

### ç§¯åˆ†å•†å“API

#### è·å–å•†å“åˆ—è¡¨

```http
GET /api/points/products?pointsType=general&isActive=true
```

**å“åº”**ï¼š

```json
{
  "success": true,
  "data": [
    {
      "id": 1,
      "name": "VIPå¤´åƒæ¡†",
      "description": "ä¸“å±VIPå¤´åƒæ¡†",
      "points_type_display": "é€šç”¨ç§¯åˆ†",
      "points_cost": 100,
      "product_type": "avatar_frame",
      "product_data": {
        "frame_type": "vip",
        "color": "#ffd700"
      }
    }
  ]
}
```

#### è´­ä¹°å•†å“

```http
POST /api/points/products/:id/purchase
Authorization: Bearer <token>
Content-Type: application/json

{
  "quantity": 1
}
```

### ç®¡ç†å‘˜ç§¯åˆ†API

#### è·å–ç§¯åˆ†ç»Ÿè®¡

```http
GET /api/admin/points/stats
Authorization: Bearer <admin_token>
```

#### è·å–ç”¨æˆ·ç§¯åˆ†

```http
GET /api/admin/points/users?page=1&limit=20&search=username
Authorization: Bearer <admin_token>
```

#### ç§¯åˆ†æ“ä½œ

```http
POST /api/admin/points/operation
Authorization: Bearer <admin_token>
Content-Type: application/json

{
  "targetUserId": "user_123",
  "pointsType": "general",
  "amount": 100,
  "operation": "add",
  "reason": "æ´»åŠ¨å¥–åŠ±"
}
```

#### æ‰¹é‡æ“ä½œ

```http
POST /api/admin/points/batch-operation
Authorization: Bearer <admin_token>
Content-Type: application/json

{
  "operations": [
    {
      "targetUserId": "user_123",
      "pointsType": "general",
      "amount": 100,
      "operation": "add"
    }
  ],
  "reason": "æ‰¹é‡å¥–åŠ±"
}
```

### ç§¯åˆ†è§„åˆ™API

#### è·å–è§„åˆ™åˆ—è¡¨

```http
GET /api/admin/points/rules
Authorization: Bearer <admin_token>
```

#### åˆ›å»ºè§„åˆ™

```http
POST /api/admin/points/rules
Authorization: Bearer <admin_token>
Content-Type: application/json

{
  "name": "æ¯æ—¥ç™»å½•å¥–åŠ±",
  "slug": "daily_login",
  "points_type_id": 1,
  "trigger_type": "login",
  "points_amount": 10,
  "max_daily": 1,
  "description": "æ¯æ—¥é¦–æ¬¡ç™»å½•è·å¾—ç§¯åˆ†"
}
```

#### æ›´æ–°è§„åˆ™

```http
PUT /api/admin/points/rules/:id
Authorization: Bearer <admin_token>
Content-Type: application/json

{
  "points_amount": 15,
  "max_daily": 2
}
```

#### åˆ é™¤è§„åˆ™

```http
DELETE /api/admin/points/rules/:id
Authorization: Bearer <admin_token>
```

### ç§¯åˆ†å•†å“ç®¡ç†API

#### è·å–å•†å“åˆ—è¡¨ï¼ˆç®¡ç†å‘˜ï¼‰

```http
GET /api/admin/points/products
Authorization: Bearer <admin_token>
```

#### åˆ›å»ºå•†å“

```http
POST /api/admin/points/products
Authorization: Bearer <admin_token>
Content-Type: application/json

{
  "name": "VIPå¤´åƒæ¡†",
  "description": "ä¸“å±VIPå¤´åƒæ¡†",
  "points_type_id": 1,
  "points_cost": 100,
  "product_type": "avatar_frame",
  "product_data": {
    "frame_type": "vip",
    "color": "#ffd700"
  }
}
```

#### æ›´æ–°å•†å“

```http
PUT /api/admin/points/products/:id
Authorization: Bearer <admin_token>
Content-Type: application/json

{
  "points_cost": 120,
  "is_active": true
}
```

#### åˆ é™¤å•†å“

```http
DELETE /api/admin/points/products/:id
Authorization: Bearer <admin_token>
```

---

## å‰ç«¯ç»„ä»¶

### ç”¨æˆ·ç§¯åˆ†ç»„ä»¶

#### UserPoints.vue - ç§¯åˆ†ç³»ç»Ÿä¸»ç»„ä»¶

**åŠŸèƒ½**ï¼š

- æ˜¾ç¤ºç”¨æˆ·æ‰€æœ‰ç§¯åˆ†ç±»å‹ä½™é¢
- æä¾›äº¤æ˜“å¸‚åœºå…¥å£
- æ˜¾ç¤ºäº¤æ˜“è®°å½•å…¥å£
- ç§¯åˆ†ç»Ÿè®¡æ¦‚è§ˆ

**ä½¿ç”¨æ–¹æ³•**ï¼š

```vue
<template>
  <UserPoints />
</template>

<script>
import UserPoints from '@/components/user/UserPoints.vue'

export default {
  components: {
    UserPoints
  }
}
</script>
```

#### UserPointsShop.vue - äº¤æ˜“å¸‚åœº

**åŠŸèƒ½**ï¼š

- æ˜¾ç¤ºå¯ç”¨å•†å“åˆ—è¡¨
- å•†å“åˆ†ç±»å’Œç­›é€‰
- è´­ä¹°å•†å“åŠŸèƒ½
- è´­ä¹°å†å²è®°å½•

**ç‰¹æ€§**ï¼š

- æ”¯æŒ6ç§å•†å“ç±»å‹
- å®æ—¶åº“å­˜æ˜¾ç¤º
- è´­ä¹°ç¡®è®¤å¼¹çª—
- è´­ä¹°æˆåŠŸé€šçŸ¥

#### UserPointsTransactions.vue - äº¤æ˜“è®°å½•

**åŠŸèƒ½**ï¼š

- æ˜¾ç¤ºç§¯åˆ†äº¤æ˜“å†å²
- æŒ‰ç§¯åˆ†ç±»å‹ç­›é€‰
- æŒ‰äº¤æ˜“ç±»å‹ç­›é€‰
- åˆ†é¡µæ˜¾ç¤º

**ç‰¹æ€§**ï¼š

- è¯¦ç»†äº¤æ˜“ä¿¡æ¯
- æ—¶é—´èŒƒå›´ç­›é€‰
- å¯¼å‡ºåŠŸèƒ½
- å®æ—¶æ›´æ–°

### ç®¡ç†å‘˜ç§¯åˆ†ç»„ä»¶

#### PointsManagement.vue - ç§¯åˆ†ç®¡ç†ä¸»ç»„ä»¶

**åŠŸèƒ½**ï¼š

- ç§¯åˆ†ç»Ÿè®¡æ¦‚è§ˆ
- ç”¨æˆ·ç§¯åˆ†ç®¡ç†
- è®°å½•ç®¡ç†
- è§„åˆ™ç®¡ç†
- å•†å“ç®¡ç†

**æ ‡ç­¾é¡µ**ï¼š

- ç§¯åˆ†ç»Ÿè®¡
- ç”¨æˆ·ç®¡ç†
- è®°å½•ç®¡ç†
- è§„åˆ™ç®¡ç†
- å•†å“ç®¡ç†

#### PointsStats.vue - ç§¯åˆ†ç»Ÿè®¡

**åŠŸèƒ½**ï¼š

- ç§¯åˆ†ç±»å‹ç»Ÿè®¡
- ä»Šæ—¥äº¤æ˜“ç»Ÿè®¡
- ç§¯åˆ†æ’è¡Œæ¦œ
- æ—¶é—´èŒƒå›´ç­›é€‰

#### PointsUserManagement.vue - ç”¨æˆ·ç§¯åˆ†ç®¡ç†

**åŠŸèƒ½**ï¼š

- ç”¨æˆ·ç§¯åˆ†æŸ¥çœ‹
- ç§¯åˆ†æ“ä½œï¼ˆå¢åŠ ã€æ‰£é™¤ã€é‡ç½®ï¼‰
- æ‰¹é‡æ“ä½œ
- ç”¨æˆ·æœç´¢å’Œç­›é€‰

#### PointsTransactionManagement.vue - äº¤æ˜“è®°å½•ç®¡ç†

**åŠŸèƒ½**ï¼š

- äº¤æ˜“è®°å½•æŸ¥çœ‹
- è®°å½•æœç´¢å’Œç­›é€‰
- è®°å½•è¯¦æƒ…æŸ¥çœ‹
- è®°å½•åˆ é™¤

#### PointsRulesManagement.vue - ç§¯åˆ†è§„åˆ™ç®¡ç†

**åŠŸèƒ½**ï¼š

- ç§¯åˆ†è§„åˆ™åˆ›å»º
- è§„åˆ™ç¼–è¾‘å’Œåˆ é™¤
- è§„åˆ™çŠ¶æ€ç®¡ç†
- è§„åˆ™é…ç½®

#### PointsProductsManagement.vue - ç§¯åˆ†å•†å“ç®¡ç†

**åŠŸèƒ½**ï¼š

- å•†å“åˆ›å»ºå’Œç¼–è¾‘
- å•†å“çŠ¶æ€ç®¡ç†
- å•†å“æ•°æ®é…ç½®
- å•†å“åˆ é™¤

### ç§¯åˆ†é€šçŸ¥ç»„ä»¶

#### PointsNotification.vue - ç§¯åˆ†é€šçŸ¥

**åŠŸèƒ½**ï¼š

- æ˜¾ç¤ºç§¯åˆ†è·å¾—é€šçŸ¥
- æ”¯æŒå¤šç§ç§¯åˆ†ç±»å‹æ ·å¼
- è‡ªåŠ¨å…³é—­
- å“åº”å¼è®¾è®¡

**ä½¿ç”¨æ–¹æ³•**ï¼š

```vue
<template>
  <PointsNotification 
    :points-amount="10"
    :points-type="'general'"
    :duration="3000"
    @close="handleClose"
  />
</template>
```

#### pointsNotification.js - é€šçŸ¥ç®¡ç†å™¨

**åŠŸèƒ½**ï¼š

- ç»Ÿä¸€ç®¡ç†ç§¯åˆ†é€šçŸ¥
- è‡ªåŠ¨è°ƒæ•´é€šçŸ¥ä½ç½®
- é™åˆ¶é€šçŸ¥æ•°é‡
- å…¨å±€æ–¹æ³•å¯¼å‡º

**ä½¿ç”¨æ–¹æ³•**ï¼š

```javascript
import { showLoginPoints, showPostPoints } from '@/utils/pointsNotification'

// æ˜¾ç¤ºç™»å½•ç§¯åˆ†é€šçŸ¥
showLoginPoints(10)

// æ˜¾ç¤ºå‘å¸–ç§¯åˆ†é€šçŸ¥
showPostPoints(20)
```

---

## ç®¡ç†å‘˜åŠŸèƒ½

### ç§¯åˆ†ç»Ÿè®¡

#### ç»Ÿè®¡å†…å®¹

- å„ç§¯åˆ†ç±»å‹ç”¨æˆ·æ•°é‡
- æ€»ä½™é¢ã€æ€»è·å¾—ã€æ€»æ¶ˆè´¹
- ä»Šæ—¥äº¤æ˜“ç»Ÿè®¡
- ç”¨æˆ·ç§¯åˆ†æ’è¡Œ

#### åŠŸèƒ½ç‰¹æ€§

- å¤šç»´åº¦ç»Ÿè®¡å±•ç¤º
- ç§¯åˆ†ç±»å‹åŒºåˆ†æ˜¾ç¤º
- æ’è¡Œæ¦œåŠŸèƒ½
- æ—¶é—´èŒƒå›´ç­›é€‰

### ç”¨æˆ·ç§¯åˆ†ç®¡ç†

#### ç®¡ç†åŠŸèƒ½

- ç”¨æˆ·ç§¯åˆ†æŸ¥çœ‹
- ç§¯åˆ†æ“ä½œï¼ˆå¢åŠ ã€æ‰£é™¤ã€é‡ç½®ï¼‰
- æ‰¹é‡æ“ä½œ
- ç”¨æˆ·æœç´¢å’Œç­›é€‰

#### æ“ä½œç±»å‹

- å¢åŠ ç§¯åˆ†
- æ‰£é™¤ç§¯åˆ†
- é‡ç½®ç§¯åˆ†
- æ‰¹é‡æ“ä½œ

### ç§¯åˆ†è®°å½•ç®¡ç†

#### ç®¡ç†åŠŸèƒ½

- äº¤æ˜“è®°å½•æŸ¥çœ‹
- è®°å½•æœç´¢å’Œç­›é€‰
- è®°å½•è¯¦æƒ…æŸ¥çœ‹
- è®°å½•åˆ é™¤

#### ç­›é€‰æ¡ä»¶

- ç§¯åˆ†ç±»å‹
- äº¤æ˜“ç±»å‹
- ç”¨æˆ·ä¿¡æ¯
- æ—¶é—´èŒƒå›´
- æ¥æºç­›é€‰

### ç§¯åˆ†è§„åˆ™ç®¡ç†

#### ç®¡ç†åŠŸèƒ½

- ç§¯åˆ†è§„åˆ™åˆ›å»º
- è§„åˆ™ç¼–è¾‘å’Œåˆ é™¤
- è§„åˆ™çŠ¶æ€ç®¡ç†
- è§„åˆ™é…ç½®

#### è§„åˆ™å‚æ•°

- è§„åˆ™åç§°å’Œæ ‡è¯†
- ç§¯åˆ†ç±»å‹å’Œæ•°é‡
- è§¦å‘ç±»å‹å’Œæ¡ä»¶
- é™åˆ¶å’Œå†·å´æ—¶é—´
- æœ‰æ•ˆæœŸè®¾ç½®

### ç§¯åˆ†å•†å“ç®¡ç†

#### ç®¡ç†åŠŸèƒ½

- å•†å“åˆ›å»ºå’Œç¼–è¾‘
- å•†å“çŠ¶æ€ç®¡ç†
- å•†å“æ•°æ®é…ç½®
- å•†å“åˆ é™¤

#### å•†å“ç±»å‹

- å¤´åƒæ¡† (avatar_frame)
- ä¸ªäººèµ„æ–™è£…é¥° (profile_decoration)
- å¾½ç«  (badge)
- ä¸»é¢˜ (theme)
- æ¸¸æˆé“å…· (game_item)
- VIPç‰¹æƒ (vip_privilege)

---

## ç³»ç»Ÿé›†æˆ

### ç§¯åˆ†é›†æˆæœåŠ¡

**æ–‡ä»¶ä½ç½®**ï¼š`backend/src/services/pointsIntegrationService.js`

**ä¸»è¦åŠŸèƒ½**ï¼š

- ç»Ÿä¸€å¤„ç†å„ç§ç§¯åˆ†è§¦å‘é€»è¾‘
- æ£€æŸ¥æ¯æ—¥é™åˆ¶å’Œå†·å´æ—¶é—´
- è°ƒç”¨ç§¯åˆ†æœåŠ¡æ·»åŠ ç§¯åˆ†
- è®°å½•ç§¯åˆ†è·å¾—æ—¥å¿—

**æ ¸å¿ƒæ–¹æ³•**ï¼š

```javascript
// å¤„ç†ç™»å½•ç§¯åˆ†
PointsIntegrationService.handleUserLogin(userId, loginType)

// å¤„ç†å‘å¸–ç§¯åˆ†
PointsIntegrationService.handleUserPost(userId, postType, postData)

// å¤„ç†å›å¤ç§¯åˆ†
PointsIntegrationService.handleUserReply(userId, replyData)

// å¤„ç†èŠå¤©ç§¯åˆ†
PointsIntegrationService.handleUserChat(userId, messageData)

// å¤„ç†æ·»åŠ å¥½å‹ç§¯åˆ†
PointsIntegrationService.handleUserAddFriend(userId, friendData)

// å¤„ç†æ´»åŠ¨ç§¯åˆ†
PointsIntegrationService.handleUserActivity(userId, activityType, activityData)
```

### é›†æˆåŠŸèƒ½

#### 1. ç”¨æˆ·ç™»å½•ç§¯åˆ†

- **è§¦å‘æ—¶æœº**ï¼šç”¨æˆ·æ­£å¸¸ç™»å½•ã€QQç™»å½•
- **ç§¯åˆ†è§„åˆ™**ï¼š10åˆ†é€šç”¨ç§¯åˆ†ï¼Œæ¯æ—¥1æ¬¡
- **é›†æˆä½ç½®**ï¼š`backend/src/routes/auth.js`

#### 2. å‘å¸–ç§¯åˆ†

- **è§¦å‘æ—¶æœº**ï¼šç”¨æˆ·åœ¨ç¤¾åŒºå‘å¸ƒæ–°å¸–å­
- **ç§¯åˆ†è§„åˆ™**ï¼š20åˆ†é€šç”¨ç§¯åˆ†ï¼Œæ¯æ—¥5æ¬¡ï¼Œå†·å´30åˆ†é’Ÿ
- **é›†æˆä½ç½®**ï¼š`backend/src/routes/community.js`

#### 3. å›å¤ç§¯åˆ†

- **è§¦å‘æ—¶æœº**ï¼šç”¨æˆ·å›å¤ç¤¾åŒºå¸–å­
- **ç§¯åˆ†è§„åˆ™**ï¼š5åˆ†é€šç”¨ç§¯åˆ†ï¼Œæ¯æ—¥10æ¬¡ï¼Œå†·å´10åˆ†é’Ÿ
- **é›†æˆä½ç½®**ï¼š`backend/src/routes/community.js`

#### 4. èŠå¤©ç§¯åˆ†

- **è§¦å‘æ—¶æœº**ï¼šç”¨æˆ·å‘é€èŠå¤©æ¶ˆæ¯
- **ç§¯åˆ†è§„åˆ™**ï¼š2åˆ†é€šç”¨ç§¯åˆ†ï¼Œæ¯æ—¥20æ¬¡ï¼Œå†·å´5åˆ†é’Ÿ
- **é›†æˆä½ç½®**ï¼š`backend/src/routes/chat.js`

#### 5. æ·»åŠ å¥½å‹ç§¯åˆ†

- **è§¦å‘æ—¶æœº**ï¼šç”¨æˆ·æ¥å—å¥½å‹è¯·æ±‚
- **ç§¯åˆ†è§„åˆ™**ï¼š15åˆ†é€šç”¨ç§¯åˆ†ï¼Œæ¯æ—¥3æ¬¡
- **é›†æˆä½ç½®**ï¼š`backend/src/routes/friends.js`

### è‡ªåŠ¨åˆå§‹åŒ–

**æ–‡ä»¶ä½ç½®**ï¼š`backend/scripts/init-points-integration.js`

**åˆå§‹åŒ–å†…å®¹**ï¼š

- åˆ›å»ºç§¯åˆ†ç±»å‹ï¼ˆé€šç”¨ã€æ¸¸æˆã€äº¤æ˜“ã€æ´»åŠ¨ï¼‰
- åˆ›å»ºé»˜è®¤ç§¯åˆ†è§„åˆ™
- ä¸ºç°æœ‰ç”¨æˆ·åˆå§‹åŒ–ç§¯åˆ†
- åˆ›å»ºç¤ºä¾‹ç§¯åˆ†å•†å“

**è§¦å‘æ—¶æœº**ï¼š

- åº”ç”¨å¯åŠ¨æ—¶è‡ªåŠ¨æ‰§è¡Œ
- å¯é€šè¿‡è„šæœ¬æ‰‹åŠ¨æ‰§è¡Œ

---

## éƒ¨ç½²é…ç½®

### ç¯å¢ƒè¦æ±‚

- Node.js 16+
- MySQL 8.0+
- Redis 6.0+
- ç°ä»£æµè§ˆå™¨æ”¯æŒ

### éƒ¨ç½²æ­¥éª¤

1. **å®‰è£…ä¾èµ–åŒ…**

```bash
cd backend
npm install

cd ../frontend
npm install
```

2. **é…ç½®æ•°æ®åº“è¿æ¥**

```bash
# å¤åˆ¶ç¯å¢ƒé…ç½®æ–‡ä»¶
cp backend/env.example backend/.env

# ç¼–è¾‘é…ç½®æ–‡ä»¶
vim backend/.env
```

3. **è¿è¡Œæ•°æ®åº“è¿ç§»**

```bash
cd backend
node scripts/init-points-integration.js
```

4. **å¯åŠ¨åç«¯æœåŠ¡**

```bash
cd backend
npm start
```

5. **æ„å»ºå‰ç«¯åº”ç”¨**

```bash
cd frontend
npm run build
```

6. **é…ç½®WebæœåŠ¡å™¨**

```nginx
server {
    listen 80;
    server_name your-domain.com;
    
    location / {
        root /path/to/frontend/dist;
        try_files $uri $uri/ /index.html;
    }
    
    location /api {
        proxy_pass http://localhost:3002;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
    }
}
```

### é…ç½®è¯´æ˜

#### æ•°æ®åº“é…ç½®

```env
DB_HOST=localhost
DB_PORT=3306
DB_NAME=fivem_website
DB_USER=your_username
DB_PASSWORD=your_password
```

#### Redisé…ç½®

```env
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=your_password
```

#### ç§¯åˆ†ç³»ç»Ÿé…ç½®

```env
# ç§¯åˆ†è¿‡æœŸæ—¶é—´ï¼ˆå¤©ï¼‰
POINTS_EXPIRE_DAYS=30

# æ¯æ—¥ç§¯åˆ†è·å–ä¸Šé™
DAILY_POINTS_LIMIT=1000

# ç§¯åˆ†é€šçŸ¥æ˜¾ç¤ºæ—¶é—´ï¼ˆæ¯«ç§’ï¼‰
POINTS_NOTIFICATION_DURATION=3000
```

---

## ä½¿ç”¨æŒ‡å—

### ç”¨æˆ·ä½¿ç”¨

#### æŸ¥çœ‹ç§¯åˆ†

1. ç™»å½•ç”¨æˆ·æ§åˆ¶å°
2. ç‚¹å‡»"ç§¯åˆ†ç³»ç»Ÿ"æ ‡ç­¾
3. æŸ¥çœ‹å„ç±»å‹ç§¯åˆ†ä½™é¢

#### è´­ä¹°å•†å“

1. è¿›å…¥äº¤æ˜“å¸‚åœº
2. æµè§ˆå¯ç”¨å•†å“
3. ç‚¹å‡»"è´­ä¹°"æŒ‰é’®
4. ç¡®è®¤è´­ä¹°ä¿¡æ¯
5. å®Œæˆè´­ä¹°

#### æŸ¥çœ‹äº¤æ˜“è®°å½•

1. è¿›å…¥äº¤æ˜“è®°å½•é¡µé¢
2. é€‰æ‹©ç§¯åˆ†ç±»å‹ç­›é€‰
3. æŸ¥çœ‹è¯¦ç»†äº¤æ˜“ä¿¡æ¯
4. å¯¼å‡ºäº¤æ˜“è®°å½•

### ç®¡ç†å‘˜ä½¿ç”¨

#### ç§¯åˆ†ç®¡ç†

1. ç™»å½•ç®¡ç†æ§åˆ¶å°
2. ç‚¹å‡»"ç§¯åˆ†ç®¡ç†"æ ‡ç­¾
3. é€‰æ‹©ç®¡ç†åŠŸèƒ½ï¼š
   - ç§¯åˆ†ç»Ÿè®¡ï¼šæŸ¥çœ‹æ•´ä½“ç»Ÿè®¡
   - ç”¨æˆ·ç®¡ç†ï¼šç®¡ç†ç”¨æˆ·ç§¯åˆ†
   - è®°å½•ç®¡ç†ï¼šæŸ¥çœ‹äº¤æ˜“è®°å½•
   - è§„åˆ™ç®¡ç†ï¼šé…ç½®ç§¯åˆ†è§„åˆ™
   - å•†å“ç®¡ç†ï¼šç®¡ç†ç§¯åˆ†å•†å“

#### ç”¨æˆ·ç§¯åˆ†æ“ä½œ

1. è¿›å…¥ç”¨æˆ·ç®¡ç†é¡µé¢
2. æœç´¢ç›®æ ‡ç”¨æˆ·
3. é€‰æ‹©ç§¯åˆ†æ“ä½œï¼š
   - å¢åŠ ç§¯åˆ†
   - æ‰£é™¤ç§¯åˆ†
   - é‡ç½®ç§¯åˆ†
4. å¡«å†™æ“ä½œåŸå› 
5. ç¡®è®¤æ“ä½œ

#### ç§¯åˆ†è§„åˆ™é…ç½®

1. è¿›å…¥è§„åˆ™ç®¡ç†é¡µé¢
2. ç‚¹å‡»"æ·»åŠ è§„åˆ™"
3. é…ç½®è§„åˆ™å‚æ•°ï¼š
   - è§„åˆ™åç§°å’Œæ ‡è¯†
   - ç§¯åˆ†ç±»å‹å’Œæ•°é‡
   - è§¦å‘æ¡ä»¶å’Œé™åˆ¶
   - æœ‰æ•ˆæœŸè®¾ç½®
4. ä¿å­˜è§„åˆ™

#### ç§¯åˆ†å•†å“ç®¡ç†

1. è¿›å…¥å•†å“ç®¡ç†é¡µé¢
2. ç‚¹å‡»"æ·»åŠ å•†å“"
3. é…ç½®å•†å“ä¿¡æ¯ï¼š
   - å•†å“åç§°å’Œæè¿°
   - ç§¯åˆ†ç±»å‹å’Œä»·æ ¼
   - å•†å“ç±»å‹å’Œæ•°æ®
   - æ’åºå’ŒçŠ¶æ€
4. ä¿å­˜å•†å“

### å¼€å‘è€…ä½¿ç”¨

#### æ·»åŠ æ–°çš„ç§¯åˆ†è§¦å‘

1. åœ¨`PointsIntegrationService`ä¸­æ·»åŠ æ–°æ–¹æ³•
2. åœ¨ç›¸åº”çš„è·¯ç”±ä¸­è°ƒç”¨ç§¯åˆ†æœåŠ¡
3. é…ç½®ç§¯åˆ†è§„åˆ™
4. æµ‹è¯•ç§¯åˆ†è§¦å‘

#### è‡ªå®šä¹‰ç§¯åˆ†é€šçŸ¥

1. ä¿®æ”¹`PointsNotification.vue`ç»„ä»¶
2. æ›´æ–°é€šçŸ¥ç®¡ç†å™¨
3. æ·»åŠ æ–°çš„é€šçŸ¥ç±»å‹
4. æµ‹è¯•é€šçŸ¥æ˜¾ç¤º

#### æ‰©å±•ç§¯åˆ†å•†å“ç±»å‹

1. åœ¨æ•°æ®åº“ä¸­æ·»åŠ æ–°çš„å•†å“ç±»å‹
2. æ›´æ–°å‰ç«¯å•†å“ç±»å‹æšä¸¾
3. ä¿®æ”¹å•†å“ç®¡ç†ç»„ä»¶
4. æ·»åŠ å•†å“ä½¿ç”¨é€»è¾‘

---

## æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

#### ç§¯åˆ†æœªè·å¾—

**å¯èƒ½åŸå› **ï¼š

- ç§¯åˆ†è§„åˆ™æœªå¯ç”¨
- æ¯æ—¥é™åˆ¶å·²è¾¾åˆ°
- å†·å´æ—¶é—´æœªè¿‡æœŸ
- ç”¨æˆ·çŠ¶æ€å¼‚å¸¸

**è§£å†³æ–¹æ³•**ï¼š

1. æ£€æŸ¥ç§¯åˆ†è§„åˆ™çŠ¶æ€
2. æŸ¥çœ‹ç”¨æˆ·ç§¯åˆ†è®°å½•
3. æ£€æŸ¥ç³»ç»Ÿæ—¥å¿—
4. éªŒè¯ç”¨æˆ·æƒé™

#### ç§¯åˆ†æ˜¾ç¤ºå¼‚å¸¸

**å¯èƒ½åŸå› **ï¼š

- æ•°æ®åº“è¿æ¥é—®é¢˜
- ç¼“å­˜çŠ¶æ€å¼‚å¸¸
- å‰ç«¯æ•°æ®åŒæ­¥é—®é¢˜
- APIå“åº”é”™è¯¯

**è§£å†³æ–¹æ³•**ï¼š

1. æ£€æŸ¥æ•°æ®åº“è¿æ¥
2. æ¸…é™¤ç¼“å­˜
3. åˆ·æ–°é¡µé¢
4. æŸ¥çœ‹APIæ—¥å¿—

#### ç§¯åˆ†é€šçŸ¥ä¸æ˜¾ç¤º

**å¯èƒ½åŸå› **ï¼š

- é€šçŸ¥ç»„ä»¶æœªæ­£ç¡®å¼•å…¥
- é€šçŸ¥ç®¡ç†å™¨æœªåˆå§‹åŒ–
- æµè§ˆå™¨å…¼å®¹æ€§é—®é¢˜
- æƒé™é—®é¢˜

**è§£å†³æ–¹æ³•**ï¼š

1. æ£€æŸ¥ç»„ä»¶å¼•å…¥
2. éªŒè¯é€šçŸ¥ç®¡ç†å™¨
3. æµ‹è¯•æµè§ˆå™¨å…¼å®¹æ€§
4. æ£€æŸ¥ç”¨æˆ·æƒé™

### æ—¥å¿—æŸ¥çœ‹

#### åç«¯æ—¥å¿—

```bash
# æŸ¥çœ‹ç§¯åˆ†æ“ä½œæ—¥å¿—
tail -f backend/logs/points.log

# æŸ¥çœ‹é”™è¯¯æ—¥å¿—
tail -f backend/logs/error.log

# æŸ¥çœ‹ç³»ç»Ÿæ—¥å¿—
tail -f backend/logs/system.log
```

#### å‰ç«¯æ—¥å¿—

```javascript
// åœ¨æµè§ˆå™¨æ§åˆ¶å°æŸ¥çœ‹
console.log('ç§¯åˆ†é€šçŸ¥:', pointsNotification)

// æŸ¥çœ‹APIè°ƒç”¨æ—¥å¿—
console.log('APIå“åº”:', response)
```

### æ€§èƒ½ä¼˜åŒ–

#### æ•°æ®åº“ä¼˜åŒ–

```sql
-- æ·»åŠ ç´¢å¼•
CREATE INDEX idx_user_points_user_type ON user_points(user_id, points_type_id);
CREATE INDEX idx_transactions_user_time ON points_transactions(user_id, created_at);
CREATE INDEX idx_transactions_type_time ON points_transactions(transaction_type, created_at);

-- ä¼˜åŒ–æŸ¥è¯¢
EXPLAIN SELECT * FROM user_points WHERE user_id = ? AND points_type_id = ?;
```

#### ç¼“å­˜ä¼˜åŒ–

```javascript
// Redisç¼“å­˜ç”¨æˆ·ç§¯åˆ†
const cacheKey = `user_points:${userId}`;
await redis.setex(cacheKey, 300, JSON.stringify(pointsData));

// å‰ç«¯ç¼“å­˜ç§¯åˆ†æ•°æ®
localStorage.setItem('user_points', JSON.stringify(pointsData));
```

### ç›‘æ§æŒ‡æ ‡

#### å…³é”®æŒ‡æ ‡

- ç§¯åˆ†è·å¾—ç‡
- ç§¯åˆ†æ¶ˆè´¹ç‡
- ç”¨æˆ·æ´»è·ƒåº¦
- å•†å“è´­ä¹°ç‡
- ç³»ç»Ÿå“åº”æ—¶é—´

#### ç›‘æ§å·¥å…·

- æ•°æ®åº“æ€§èƒ½ç›‘æ§
- APIå“åº”æ—¶é—´ç›‘æ§
- ç”¨æˆ·è¡Œä¸ºåˆ†æ
- é”™è¯¯ç‡ç›‘æ§

### å¤‡ä»½æ¢å¤

#### æ•°æ®å¤‡ä»½

```bash
# å¤‡ä»½ç§¯åˆ†ç›¸å…³è¡¨
mysqldump -u username -p database_name points_types points_rules user_points points_transactions points_products points_orders user_points_usage > points_backup.sql

# å¤‡ä»½é…ç½®æ–‡ä»¶
cp backend/.env backend/.env.backup
```

#### æ•°æ®æ¢å¤

```bash
# æ¢å¤ç§¯åˆ†æ•°æ®
mysql -u username -p database_name < points_backup.sql

# æ¢å¤é…ç½®æ–‡ä»¶
cp backend/.env.backup backend/.env
```

---

## æ€»ç»“

ç§¯åˆ†ç³»ç»Ÿæ˜¯ä¸€ä¸ªåŠŸèƒ½å®Œæ•´ã€è®¾è®¡åˆç†çš„ç”¨æˆ·æ¿€åŠ±ç³»ç»Ÿï¼Œå…·æœ‰ä»¥ä¸‹ç‰¹ç‚¹ï¼š

### ä¼˜åŠ¿

- **åŠŸèƒ½å®Œæ•´**ï¼šæ¶µç›–ç§¯åˆ†è·å–ã€æ¶ˆè´¹ã€ç®¡ç†ã€ç»Ÿè®¡ç­‰å…¨æµç¨‹
- **ç±»å‹ä¸°å¯Œ**ï¼šæ”¯æŒ4ç§ç§¯åˆ†ç±»å‹ï¼Œæ»¡è¶³ä¸åŒéœ€æ±‚
- **è‡ªåŠ¨åŒ–**ï¼šè‡ªåŠ¨è§¦å‘ç§¯åˆ†è·å–ï¼Œå‡å°‘äººå·¥å¹²é¢„
- **å¯æ‰©å±•**ï¼šæ”¯æŒè‡ªå®šä¹‰è§„åˆ™å’Œå•†å“ç±»å‹
- **ç”¨æˆ·å‹å¥½**ï¼šç›´è§‚çš„ç•Œé¢å’Œå®æ—¶é€šçŸ¥

### æŠ€æœ¯ç‰¹ç‚¹

- **æ¨¡å—åŒ–è®¾è®¡**ï¼šå„åŠŸèƒ½æ¨¡å—ç‹¬ç«‹ï¼Œä¾¿äºç»´æŠ¤
- **æ•°æ®åº“ä¼˜åŒ–**ï¼šåˆç†çš„è¡¨ç»“æ„å’Œç´¢å¼•è®¾è®¡
- **APIè®¾è®¡**ï¼šRESTful APIï¼Œæ˜“äºé›†æˆ
- **å‰ç«¯ç»„ä»¶åŒ–**ï¼šå¯å¤ç”¨çš„Vueç»„ä»¶
- **å®æ—¶é€šçŸ¥**ï¼šç”¨æˆ·å‹å¥½çš„é€šçŸ¥ç³»ç»Ÿ

### åº”ç”¨åœºæ™¯

- **ç”¨æˆ·æ¿€åŠ±**ï¼šé€šè¿‡ç§¯åˆ†å¥–åŠ±é¼“åŠ±ç”¨æˆ·å‚ä¸
- **å•†å“é”€å”®**ï¼šäº¤æ˜“å¸‚åœºæä¾›è™šæ‹Ÿå•†å“é”€å”®
- **æ•°æ®åˆ†æ**ï¼šé€šè¿‡ç§¯åˆ†æ•°æ®åˆ†æç”¨æˆ·è¡Œä¸º
- **ç¤¾åŒºå»ºè®¾**ï¼šé€šè¿‡ç§¯åˆ†ç³»ç»Ÿå»ºè®¾æ´»è·ƒç¤¾åŒº

ç§¯åˆ†ç³»ç»Ÿå·²å®Œå…¨é›†æˆåˆ°ç°æœ‰åŠŸèƒ½ä¸­ï¼Œå¯ä»¥ç«‹å³æŠ•å…¥ä½¿ç”¨ï¼Œä¸ºç”¨æˆ·æä¾›æ›´å¥½çš„ä½“éªŒï¼Œä¸ºç½‘ç«™è¿è¥æä¾›æ•°æ®æ”¯æŒã€‚
